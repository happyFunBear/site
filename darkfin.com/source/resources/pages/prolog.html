<style>
  body[page-type="prolog"],
  #main {
    background: #000;
  }
</style>
<div class="prolog">
  <div class="jumbotron">
    <div class="container">
      <h1>Prolog</h1>
      <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Asperiores facilis, consectetur eveniet nobis vero ad deserunt fugiat
        obcaecati, ipsam accusantium nihil vel quae fugit cupiditate quod similique nemo aperiam atque?
      </p>
    </div>
  </div>
  <div class="container">
    <div class="spin" data-bfc="true">
      <figure>
        <img src="assets/images/p_p1.jpg" />
        <img src="assets/images/p_p2.jpg" />
        <img src="assets/images/p_p3.jpg" />
        <img src="assets/images/p_p4.jpg" />
      </figure>
      <div class="spin-controls">
        <button class="nav prev">Prev</button>
        <button class="nav next">Next</button>
      </div>
    </div>

    <div class="row">
      <div class="col-12 py-2 text-center">
        <h3>
          <a href="#/story/year/1/chapter/1">Start Her Story</a>
        </h3>
      </div>
    </div>
  </div>


  <script>
    function start() {
      var carousels = document.querySelectorAll('.spin');
      for (var i = 0; i < carousels.length; i++) {
        carousel(carousels[i]);
      }
    }

    function carousel(root) {
      var
        figure = root.querySelector('figure'),
        nav = root.querySelector('nav'),
        images = figure.children,
        n = images.length,
        gap = root.dataset.gap || 100,
        bfc = 'bfc' in root.dataset,
        theta = 2 * Math.PI / n,
        currImage = 0
        ;

      setupCarousel(n, parseFloat(getComputedStyle(images[0]).width));
      window.addEventListener('resize', () => {
        setupCarousel(n, parseFloat(getComputedStyle(images[0]).width))
      });

      setupNavigation();

      function setupCarousel(n, s) {
        var apothem = s / (2 * Math.tan(Math.PI / n));

        figure.style.transformOrigin = `50% 50% ${- apothem}px`;

        for (var i = 0; i < n; i++){
          images[i].style.padding = `${gap}px`;}
        for (i = 1; i < n; i++) {
          images[i].style.transformOrigin = `50% 50% ${- apothem}px`;
          images[i].style.transform = `rotateY(${i * theta}rad)`;
        }
        if (bfc) {
          for (i = 0; i < n; i++) {
            images[i].style.backfaceVisibility = 'hidden';
          }
        }
        rotateCarousel(currImage);
      }

      function setupNavigation() {
        $('.nav.next').on('click', function (e) {
          e.stopPropagation();
          currImage++;
          rotateCarousel(currImage);

        });
        $('.nav.prev').on('click', function (e) {
          e.stopPropagation();
          currImage--;
          rotateCarousel(currImage);

        });

      }

      function rotateCarousel(imageIndex) {
        figure.style.transform = `rotateY(${imageIndex * -theta}rad)`;
      }

    }
    start();
  </script>